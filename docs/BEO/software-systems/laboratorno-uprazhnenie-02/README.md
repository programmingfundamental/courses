---
layout: default
title: Лабораторно упражнение 2
parent: Програмни системи
has_children: true
nav_order: 2
permalink: /docs/software-systems/laboratorno-uprazhnenie-2
---

# Упражнение #2

В това упражнение ще се фокусираме върху изграждането на визуалната структура на JavaFX приложенията, използвайки **Контейнери за изглед (Layout Controls)** и **FXML**. FXML е декларативен XML базиран език, който позволява лесно дефиниране на потребителски интерфейси, отделяйки дизайна от програмната логика.

## 1. FXML – Декларативен UI дизайн

FXML е XML базиран език, който служи за дефиниране на потребителския интерфейс в JavaFX. Той позволява ясно разделение между визуалното представяне и програмната логика.

### 1.1. Структура на FXML файла

Всеки FXML файл следва строго определена структура, която се състои от три основни части:

1. XML хедър: Първият ред винаги е стандартният XML дефиниционен ред:

`<?xml version="1.0" encoding="UTF-8"?>`

2. Инструкции за импортиране (`<?import ...?>`):

В FXML не можем да използваме графични елементи, без да сме ги импортирали. Те съответстват директно на import операторите в Java.

Пример: За да използваме `Button`, трябва да добавим `<?import javafx.scene.control.Button?>`. Могат да се използват и маски: `<?import javafx.scene.layout.*?>`.

3. Коренов елемент (Root Element):

Всеки файл трябва да има точно един коренов елемент (обикновено контейнер за изглед като `AnchorPane` или `VBox`). Той дефинира началото на йерархията и съдържа дефиницията на пространството от имена (`xmlns:fx="http://javafx.com/fxml/1"`) и връзката с контролера.

### 1.2. Йерархия на графичните елементи: Контейнери и Дъщерни елементи

В JavaFX всичко се организира в дървовидна структура (Scene Graph). Елементите се делят на две основни категории според ролята им в йерархията:

- Контейнерни елементи (Parent/Containers):

  Това са елементи, които могат да съдържат други елементи в себе си. В JavaFX това са наследниците на класа Parent (най-често от пакета javafx.scene.layout).
  - Характеристика: Те притежават свойството children (списък от деца). В FXML дъщерните елементи се записват директно между отварящия и затварящия таг на контейнера.

  - Примери: `HBox`, `VBox`, `GridPane`, `StackPane`.

- Дъщерни/Листни елементи (Children/Leaf Nodes):

  Това са крайните елементи, които обикновено не съдържат други обекти. Това са базовите контроли за интерфейса.
  - Характеристика: Те се разполагат вътре в контейнерите и техните свойства (позиция, размер) често се управляват от логиката на родителския контейнер.

  - Примери: `Button`, `Label`, `TextField`.

Правило за влагане: Контейнерите могат да съдържат както контроли (`Button`), така и други контейнери (`HBox` вътре в `VBox`). Това позволява изграждането на сложни и адаптивни интерфейси чрез вложени структури.

### 1.3. Връзка между FXML и Java (fx:id)

За да можем да достъпим графичен елемент, дефиниран в FXML, от Java кода, използваме атрибута `fx:id`.

Пример в FXML: `<Button fx:id="myButton" />`

Пример в Java (чрез lookup): `Button btn = (Button) root.lookup("#myButton");`

## 2. Контейнери за изглед (Layout Controls):

Контейнерите за изглед са специални контейнери, които управляват позиционирането и оразмеряването на своите деца (други контроли или Контейнери за изглед). Използването им е от ключово значение за създаването на адаптивни и добре изглеждащи потребителски интерфейси.

- **`HBox` (Хоризонтална кутия):** Подрежда децата си едно до друго хоризонтално.
  - Свойства: `spacing` (разстояние между децата), `alignment` (подравняване на децата в кутията), `HGrow` (разтягане по хоризонтала за отделно дете).
  - Пример:
    - Без атрибути:

      ```xml
      <HBox> ... </HBox>
      ```

    - С атрибути:
      ```xml
      <HBox spacing="15" alignment="CENTER" prefHeight="50.0"> ... </HBox>
      ```

- **`VBox` (Вертикална кутия):** Подрежда децата си едно под друго вертикално.
  - Свойства: `spacing` (разстояние между децата), `alignment` (подравняване на децата в кутията), `VGrow` (разтягане по вертикала за отделно дете).
  - Пример:
    - Без атрибути:

      ```xml
      <VBox> ... </VBox>
      ```

    - С атрибути:
      ```xml
      <VBox spacing="10" alignment="TOP_LEFT" prefWidth="200.0"> ... </VBox>
      ```

- **`BorderPane` (Контейнер с граници):** Разполага децата си в пет региона: `TOP` (горе), `BOTTOM` (долу), `LEFT` (ляво), `RIGHT` (дясно), `CENTER` (център).
  - Много полезен за основни оформления на приложения (напр. меню горе, статус бар долу, навигация отляво/отдясно, основно съдържание в центъра).
    - Пример:
      - Без атрибути:

        ```xml
        <BorderPane> ... </BorderPane>
        ```

      - С атрибути:
        ```xml
        <BorderPane prefWidth="800" prefHeight="600">
            <top> <!-- Дефинира елемента в горната зона -->
                <Label text="Header" BorderPane.alignment="CENTER" />
            </top>
        </BorderPane>
        ```

- **`GridPane` (Мрежов контейнер):** Организира децата си в гъвкава мрежа от редове и колони.
  - Полезен за форми, таблици или други структурирани оформления. Децата се добавят към конкретна колона и ред.
  - Пример:
    - Без атрибути:

      ```xml
      <GridPane> ... </GridPane>
      ```

    - С атрибути:
      ```xml
      <GridPane hgap="10" vgap="10" alignment="CENTER">
          <!-- Дефинира разстояние между колоните (hgap) и редовете (vgap) -->
      </GridPane>
      ```

- **`FlowPane` (Поточен контейнер):** Разполага децата си последователно, подобно на поток от текст. Когато не остава място в текущия ред/колона, преминава към следващия.
  - Може да бъде хоризонтален или вертикален.
  - Пример:
    - Без атрибути:

      ```xml
      <FlowPane> ... </FlowPane>
      ```

    - С атрибути:
      ```xml
      <FlowPane orientation="VERTICAL" hgap="5" vgap="5" prefWrapLength="200"> ... </FlowPane>
      ```

- **`StackPane` (Наслагващ контейнер):** Наслагва децата си едно върху друго в центъра, подобно на стек от карти.
  - Полезен за показване на алтернативни изгледи или наслагване на елементи (напр. индикатор за зареждане върху друго съдържание).
  - Пример:
    - Без атрибути:

      ```xml
      <StackPane> ... </StackPane>
      ```

    - С атрибути:
      ```xml
      <StackPane prefWidth="400" prefHeight="300"> ... </StackPane>
      ```

- **`AnchorPane` (Закотвящ контейнер):** Позволява закачане (anchoring) на децата си към една или повече страни на контейнера.
  - Дава много прецизен контрол върху позиционирането, но може да е по-труден за поддържане при промяна на размера. Позициите се задават чрез свойствата `topAnchor`, `bottomAnchor`, `leftAnchor`, `rightAnchor`.
  - Пример:
    - Без атрибути:

      ```xml
      <AnchorPane> ... </AnchorPane>
      ```

    - С атрибути:

      ```xml
      <AnchorPane>
          <Button text="Stay in corner" AnchorPane.topAnchor="10.0" AnchorPane.rightAnchor="10.0" />

      </AnchorPane>
      ```

## 3. Базови контроли (UI Controls):

### 3.1 Текстови контроли

Те служат за визуализация или въвеждане на текстова информация.

- **`Label` (Етикет):** Неинтерактивен текст, използван за описание на други елементи.
  - _Свойства:_ `text` (съдържание), `graphic` (може да съдържа икона/изображение), `wrapText` (пренасяне на нов ред), `alignment` (подравняване).

  - _Употреба:_ Заглавия, инструкции към полета за въвеждане.

- **`TextField` (Текстово поле):** Едноредово поле за въвеждане на свободен текст.
  - _Свойства:_ `promptText` (текст-подсказка вътре в полето), `text` (въведеният стринг), `editable` (дали е редактируемо).

  - _Употреба:_ Име на потребител, имейл, търсене.

- **`PasswordField` (Поле за парола):** Специализиран `TextField`, който маскира въведените символи (обикновено с точки).
  - _Употреба:_ Пароли и чувствителна информация.

- **`TextArea` (Текстова област):** Многоредово поле за въвеждане на дълги текстове.
  - _Свойства:_ `prefRowCount`, `prefColumnCount`, `wrapText`.

  - _Употреба:_ Коментари, описания, логове.

### 3.2 Бутони и контроли за избор:

Тези елементи задействат логика или позволяват на потребителя да направи избор.

- **`Button` (Бутон):** Стандартен бутон за натискане.
  - _Свойства:_ `defaultButton` (активира се при натискане на `Enter`), `cancelButton` (активира се при `Escape`).

  - _Употреба:_ Потвърждение на форми, отваряне на нови прозорци.

- **`CheckBox` (Флагче):** Двупозиционен (или трипозиционен) избор.
  - _Свойства:_ `selected` (`boolean`), `allowIndeterminate` (позволява трето състояние "неопределено").

  - _Употреба:_ Приемане на общи условия, избор на множество опции.

- **`RadioButton` (Радио бутон):** Избор на само една опция от дадена група.
  - _Свойства:_ `toggleGroup` (всички бутони в една логическа група трябва да споделят една инстанция на `ToggleGroup`).

  - _Употреба:_ Избор на пол, начин на плащане, ниво на трудност.

- **`ToggleButton` (Превключващ бутон):** Бутон, който остава в състояние "натиснат" (`selected`), докато не бъде натиснат отново.
  - _Употреба:_ Включване/изключване на режими (напр. `Bold`/`Italic` в текстов редактор).
